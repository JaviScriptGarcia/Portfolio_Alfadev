---
import Section from "@/components/core/Section.astro";
import Features from "@/components/Features.astro";
import Testimonial from "@/components/Testimonial.astro";
import CompanyLogos from "@/components/CompanyLogos.astro";
import SectionSeparator from "@/components/SectionSeparator.astro";
import Base from "@/layouts/Base.astro";
import Cta from "@/layouts/partials/Cta.astro";
import { getEntry } from "astro:content";

const homepage = await getEntry("homepage", "index");
// console.log(homepage);
const { banner, sections, features, testimonial, company_logos, section_separator, section_separator_after_logos, projects } = homepage.data;
const call_to_action = homepage.data.call_to_action;
---

<Base>
  <!-- banner -->
  <section class="lg:mb-10 animate-fade-in">
    <Section section={banner} />
  </section>
  <!-- multi section -->
  {
    sections && (
      <section class="multi-section">
        {sections.map((section) => (
          <Section section={section} />
        ))}
      </section>
    )
  }
  <!-- company logos banner -->
  {section_separator && <SectionSeparator section_separator={section_separator} />}
  {company_logos && <CompanyLogos company_logos={company_logos} />}
  <!-- section separator -->
  {section_separator_after_logos && <SectionSeparator section_separator={section_separator_after_logos} />}
  <!-- projects section -->
  {
    projects && (
      <section class="multi-section">
        {projects.map((project) => (
          <Section section={project} />
        ))}
      </section>
    )
  }
  <!-- key features -->
  {features && <Features features={features} />}
  <!-- testimonial -->
  {testimonial && <Testimonial testimonial={testimonial} />}
  <!-- call to action -->
  {call_to_action && <Cta {...call_to_action} />}
  <!-- <Content /> -->
</Base>
